!function(){function e(t){var n=e.resolve(t),r=e.modules[n];if(!r)throw new Error('failed to require "'+t+'"');return r.exports||(r.exports={},r.call(r.exports,r,r.exports,e.relative(n))),r.exports}e.modules={},e.resolve=function(t){var n=t,r=t+".js",o=t+"/index.js";return e.modules[r]&&r||e.modules[o]&&o||n},e.register=function(t,n){e.modules[t]=n},e.relative=function(t){return function(n){if("."!=n.charAt(0))return e(n);var r=t.split("/"),o=n.split("/");r.pop();for(var i=0;i<o.length;i++){var s=o[i];".."==s?r.pop():"."!=s&&r.push(s)}return e(r.join("/"))}},e.register("browser/debug.js",function(e){e.exports=function(){return function(){}}}),e.register("browser/diff.js",function(e){var t=function(){function e(e){return{newPos:e.newPos,components:e.components.slice(0)}}function t(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t}function n(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;")}var r=function(e){this.ignoreWhitespace=e};r.prototype={diff:function(t,n){if(n==t)return[{value:n}];if(!n)return[{value:t,removed:!0}];if(!t)return[{value:n,added:!0}];n=this.tokenize(n),t=this.tokenize(t);var r=n.length,o=t.length,i=r+o,s=[{newPos:-1,components:[]}],a=this.extractCommon(s[0],n,t,0);if(s[0].newPos+1>=r&&a+1>=o)return s[0].components;for(var u=1;i>=u;u++)for(var c=-1*u;u>=c;c+=2){var l,p=s[c-1],f=s[c+1];a=(f?f.newPos:0)-c,p&&(s[c-1]=void 0);var h=p&&p.newPos+1<r,d=f&&a>=0&&o>a;if(h||d){!h||d&&p.newPos<f.newPos?(l=e(f),this.pushComponent(l.components,t[a],void 0,!0)):(l=e(p),l.newPos++,this.pushComponent(l.components,n[l.newPos],!0,void 0));var a=this.extractCommon(l,n,t,c);if(l.newPos+1>=r&&a+1>=o)return l.components;s[c]=l}else s[c]=void 0}},pushComponent:function(e,t,n,r){var o=e[e.length-1];o&&o.added===n&&o.removed===r?e[e.length-1]={value:this.join(o.value,t),added:n,removed:r}:e.push({value:t,added:n,removed:r})},extractCommon:function(e,t,n,r){for(var o=t.length,i=n.length,s=e.newPos,a=s-r;o>s+1&&i>a+1&&this.equals(t[s+1],n[a+1]);)s++,a++,this.pushComponent(e.components,t[s],void 0,void 0);return e.newPos=s,a},equals:function(e,t){var n=/\S/;return!this.ignoreWhitespace||n.test(e)||n.test(t)?e==t:!0},join:function(e,t){return e+t},tokenize:function(e){return e}};var o=new r,i=new r(!0);i.tokenize=function(e){return t(e.split(/(\s+|\b)/))};var s=new r(!0);s.tokenize=function(e){return t(e.split(/([{}:;,]|\s+)/))};var a=new r;return a.tokenize=function(e){return e.split(/^/m)},{diffChars:function(e,t){return o.diff(e,t)},diffWords:function(e,t){return i.diff(e,t)},diffLines:function(e,t){return a.diff(e,t)},diffCss:function(e,t){return s.diff(e,t)},createPatch:function(e,t,n,r,o){function i(e){return e.map(function(e){return" "+e})}function s(e,t,n){var r=c[c.length-2],o=t===c.length-2,i=t===c.length-3&&(n.added===!r.added||n.removed===!r.removed);/\n$/.test(n.value)||!o&&!i||e.push("\\ No newline at end of file")}var u=[];u.push("Index: "+e),u.push("==================================================================="),u.push("--- "+e+("undefined"==typeof r?"":"	"+r)),u.push("+++ "+e+("undefined"==typeof o?"":"	"+o));var c=a.diff(t,n);c[c.length-1].value||c.pop(),c.push({value:"",lines:[]});for(var l=0,p=0,f=[],h=1,d=1,g=0;g<c.length;g++){var m=c[g],v=m.lines||m.value.replace(/\n$/,"").split("\n");if(m.lines=v,m.added||m.removed){if(!l){var y=c[g-1];l=h,p=d,y&&(f=i(y.lines.slice(-4)),l-=f.length,p-=f.length)}f.push.apply(f,v.map(function(e){return(m.added?"+":"-")+e})),s(f,g,m),m.added?d+=v.length:h+=v.length}else{if(l)if(v.length<=8&&g<c.length-2)f.push.apply(f,i(v));else{var b=Math.min(v.length,4);u.push("@@ -"+l+","+(h-l+b)+" +"+p+","+(d-p+b)+" @@"),u.push.apply(u,f),u.push.apply(u,i(v.slice(0,b))),v.length<=4&&s(u,g,m),l=0,p=0,f=[]}h+=v.length,d+=v.length}}return u.join("\n")+"\n"},convertChangesToXML:function(e){for(var t=[],r=0;r<e.length;r++){var o=e[r];o.added?t.push("<ins>"):o.removed&&t.push("<del>"),t.push(n(o.value)),o.added?t.push("</ins>"):o.removed&&t.push("</del>")}return t.join("")}}}();"undefined"!=typeof e&&(e.exports=t)}),e.register("browser/events.js",function(e,t){function n(e){return"[object Array]"=={}.toString.call(e)}function r(){}t.EventEmitter=r,r.prototype.on=function(e,t){return this.$events||(this.$events={}),this.$events[e]?n(this.$events[e])?this.$events[e].push(t):this.$events[e]=[this.$events[e],t]:this.$events[e]=t,this},r.prototype.addListener=r.prototype.on,r.prototype.once=function(e,t){function n(){r.removeListener(e,n),t.apply(this,arguments)}var r=this;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){if(this.$events&&this.$events[e]){var r=this.$events[e];if(n(r)){for(var o=-1,i=0,s=r.length;s>i;i++)if(r[i]===t||r[i].listener&&r[i].listener===t){o=i;break}if(0>o)return this;r.splice(o,1),r.length||delete this.$events[e]}else(r===t||r.listener&&r.listener===t)&&delete this.$events[e]}return this},r.prototype.removeAllListeners=function(e){return void 0===e?(this.$events={},this):(this.$events&&this.$events[e]&&(this.$events[e]=null),this)},r.prototype.listeners=function(e){return this.$events||(this.$events={}),this.$events[e]||(this.$events[e]=[]),n(this.$events[e])||(this.$events[e]=[this.$events[e]]),this.$events[e]},r.prototype.emit=function(e){if(!this.$events)return!1;var t=this.$events[e];if(!t)return!1;var r=[].slice.call(arguments,1);if("function"==typeof t)t.apply(this,r);else{if(!n(t))return!1;for(var o=t.slice(),i=0,s=o.length;s>i;i++)o[i].apply(this,r)}return!0}}),e.register("browser/fs.js",function(){}),e.register("browser/path.js",function(){}),e.register("browser/progress.js",function(e){function t(){this.percent=0,this.size(0),this.fontSize(11),this.font("helvetica, arial, sans-serif")}e.exports=t,t.prototype.size=function(e){return this._size=e,this},t.prototype.text=function(e){return this._text=e,this},t.prototype.fontSize=function(e){return this._fontSize=e,this},t.prototype.font=function(e){return this._font=e,this},t.prototype.update=function(e){return this.percent=e,this},t.prototype.draw=function(e){var t=Math.min(this.percent,100),n=this._size,r=n/2,o=r,i=r,s=r-1,a=this._fontSize;e.font=a+"px "+this._font;var u=2*Math.PI*(t/100);e.clearRect(0,0,n,n),e.strokeStyle="#9f9f9f",e.beginPath(),e.arc(o,i,s,0,u,!1),e.stroke(),e.strokeStyle="#eee",e.beginPath(),e.arc(o,i,s-1,0,u,!0),e.stroke();var c=this._text||(0|t)+"%",l=e.measureText(c).width;return e.fillText(c,o-l/2+1,i+a/2-1),this}}),e.register("browser/tty.js",function(e,t){t.isatty=function(){return!0},t.getWindowSize=function(){return[window.innerHeight,window.innerWidth]}}),e.register("context.js",function(e){function t(){}e.exports=t,t.prototype.runnable=function(e){return 0==arguments.length?this._runnable:(this.test=this._runnable=e,this)},t.prototype.timeout=function(e){return this.runnable().timeout(e),this},t.prototype.slow=function(e){return this.runnable().slow(e),this},t.prototype.inspect=function(){return JSON.stringify(this,function(e,t){return"_runnable"!=e&&"test"!=e?t:void 0},2)}}),e.register("hook.js",function(e,t,n){function r(e,t){i.call(this,e,t),this.type="hook"}function o(){}var i=n("./runnable");e.exports=r,o.prototype=i.prototype,r.prototype=new o,r.prototype.constructor=r,r.prototype.error=function(e){if(0==arguments.length){var e=this._error;return this._error=null,e}this._error=e}}),e.register("interfaces/bdd.js",function(e,t,n){var r=n("../suite"),o=n("../test");e.exports=function(e){var t=[e];e.on("pre-require",function(e,n,i){e.before=function(e){t[0].beforeAll(e)},e.after=function(e){t[0].afterAll(e)},e.beforeEach=function(e){t[0].beforeEach(e)},e.afterEach=function(e){t[0].afterEach(e)},e.describe=e.context=function(e,n){var o=r.create(t[0],e);return t.unshift(o),n.call(o),t.shift(),o},e.xdescribe=e.xcontext=e.describe.skip=function(e,n){var o=r.create(t[0],e);o.pending=!0,t.unshift(o),n.call(o),t.shift()},e.describe.only=function(t,n){var r=e.describe(t,n);i.grep(r.fullTitle())},e.it=e.specify=function(e,n){var r=t[0];if(r.pending)var n=null;var i=new o(e,n);return r.addTest(i),i},e.it.only=function(t,n){var r=e.it(t,n);i.grep(r.fullTitle())},e.xit=e.xspecify=e.it.skip=function(t){e.it(t)}})}}),e.register("interfaces/exports.js",function(e,t,n){var r=n("../suite"),o=n("../test");e.exports=function(e){function t(e){var i;for(var s in e)if("function"==typeof e[s]){var a=e[s];switch(s){case"before":n[0].beforeAll(a);break;case"after":n[0].afterAll(a);break;case"beforeEach":n[0].beforeEach(a);break;case"afterEach":n[0].afterEach(a);break;default:n[0].addTest(new o(s,a))}}else{var i=r.create(n[0],s);n.unshift(i),t(e[s]),n.shift()}}var n=[e];e.on("require",t)}}),e.register("interfaces/index.js",function(e,t,n){t.bdd=n("./bdd"),t.tdd=n("./tdd"),t.qunit=n("./qunit"),t.exports=n("./exports")}),e.register("interfaces/qunit.js",function(e,t,n){var r=n("../suite"),o=n("../test");e.exports=function(e){var t=[e];e.on("pre-require",function(e){e.before=function(e){t[0].beforeAll(e)},e.after=function(e){t[0].afterAll(e)},e.beforeEach=function(e){t[0].beforeEach(e)},e.afterEach=function(e){t[0].afterEach(e)},e.suite=function(e){t.length>1&&t.shift();var n=r.create(t[0],e);t.unshift(n)},e.test=function(e,n){t[0].addTest(new o(e,n))}})}}),e.register("interfaces/tdd.js",function(e,t,n){var r=n("../suite"),o=n("../test");e.exports=function(e){var t=[e];e.on("pre-require",function(e,n,i){e.setup=function(e){t[0].beforeEach(e)},e.teardown=function(e){t[0].afterEach(e)},e.suiteSetup=function(e){t[0].beforeAll(e)},e.suiteTeardown=function(e){t[0].afterAll(e)},e.suite=function(e,n){var o=r.create(t[0],e);return t.unshift(o),n.call(o),t.shift(),o},e.suite.only=function(t,n){var r=e.suite(t,n);i.grep(r.fullTitle())},e.test=function(e,n){var r=new o(e,n);return t[0].addTest(r),r},e.test.only=function(t,n){var r=e.test(t,n);i.grep(r.fullTitle())},e.test.skip=function(t){e.test(t)}})}}),e.register("mocha.js",function(e,t,n){function r(e){return __dirname+"/../img/"+e+".png"}function o(e){e=e||{},this.files=[],this.options=e,this.grep(e.grep),this.suite=new t.Suite("",new t.Context),this.ui(e.ui),this.bail(e.bail),this.reporter(e.reporter),e.timeout&&this.timeout(e.timeout),e.slow&&this.slow(e.slow)}var i=n("browser/path"),s=n("./utils");t=e.exports=o,t.utils=s,t.interfaces=n("./interfaces"),t.reporters=n("./reporters"),t.Runnable=n("./runnable"),t.Context=n("./context"),t.Runner=n("./runner"),t.Suite=n("./suite"),t.Hook=n("./hook"),t.Test=n("./test"),o.prototype.bail=function(e){return 0==arguments.length&&(e=!0),this.suite.bail(e),this},o.prototype.addFile=function(e){return this.files.push(e),this},o.prototype.reporter=function(e){if("function"==typeof e)this._reporter=e;else{e=e||"dot";try{this._reporter=n("./reporters/"+e)}catch(t){this._reporter=n(e)}if(!this._reporter)throw new Error('invalid reporter "'+e+'"')}return this},o.prototype.ui=function(e){if(e=e||"bdd",this._ui=t.interfaces[e],!this._ui)throw new Error('invalid interface "'+e+'"');return this._ui=this._ui(this.suite),this},o.prototype.loadFiles=function(e){var t=this,r=this.suite,o=this.files.length;this.files.forEach(function(s){s=i.resolve(s),r.emit("pre-require",global,s,t),r.emit("require",n(s),s,t),r.emit("post-require",global,s,t),--o||e&&e()})},o.prototype._growl=function(e,t){var o=n("growl");e.on("end",function(){var n=t.stats;if(n.failures){var i=n.failures+" of "+e.total+" tests failed";o(i,{name:"mocha",title:"Failed",image:r("error")})}else o(n.passes+" tests passed in "+n.duration+"ms",{name:"mocha",title:"Passed",image:r("ok")})})},o.prototype.grep=function(e){return this.options.grep="string"==typeof e?new RegExp(s.escapeRegexp(e)):e,this},o.prototype.invert=function(){return this.options.invert=!0,this},o.prototype.ignoreLeaks=function(){return this.options.ignoreLeaks=!0,this},o.prototype.checkLeaks=function(){return this.options.ignoreLeaks=!1,this},o.prototype.growl=function(){return this.options.growl=!0,this},o.prototype.globals=function(e){return this.options.globals=(this.options.globals||[]).concat(e),this},o.prototype.timeout=function(e){return this.suite.timeout(e),this},o.prototype.slow=function(e){return this.suite.slow(e),this},o.prototype.asyncOnly=function(){return this.options.asyncOnly=!0,this},o.prototype.run=function(e){this.files.length&&this.loadFiles();var n=this.suite,r=this.options,o=new t.Runner(n),i=new this._reporter(o);return o.ignoreLeaks=!1!==r.ignoreLeaks,o.asyncOnly=r.asyncOnly,r.grep&&o.grep(r.grep,r.invert),r.globals&&o.globals(r.globals),r.growl&&this._growl(o,i),o.run(e)}}),e.register("ms.js",function(e){function t(e){var t=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"y":return 315576e5*n;case"days":case"day":case"d":return 864e5*n;case"hours":case"hour":case"h":return 36e5*n;case"minutes":case"minute":case"m":return 6e4*n;case"seconds":case"second":case"s":return 1e3*n;case"ms":return n}}}function n(e){return e==s?Math.round(e/s)+" day":e>s?Math.round(e/s)+" days":e==i?Math.round(e/i)+" hour":e>i?Math.round(e/i)+" hours":e==o?Math.round(e/o)+" minute":e>o?Math.round(e/o)+" minutes":e==r?Math.round(e/r)+" second":e>r?Math.round(e/r)+" seconds":e+" ms"}var r=1e3,o=60*r,i=60*o,s=24*i;e.exports=function(e){return"string"==typeof e?t(e):n(e)}}),e.register("reporters/base.js",function(e,n,r){function o(e){var t=this.stats={suites:0,tests:0,passes:0,pending:0,failures:0},n=this.failures=[];e&&(this.runner=e,e.stats=t,e.on("start",function(){t.start=new p}),e.on("suite",function(e){t.suites=t.suites||0,e.root||t.suites++}),e.on("test end",function(){t.tests=t.tests||0,t.tests++}),e.on("pass",function(e){t.passes=t.passes||0;var n=e.slow()/2;e.speed=e.duration>e.slow()?"slow":e.duration>n?"medium":"fast",t.passes++}),e.on("fail",function(e,r){t.failures=t.failures||0,t.failures++,e.err=r,n.push(e)}),e.on("end",function(){t.end=new p,t.duration=new p-t.start}),e.on("pending",function(){t.pending++}))}function i(e,t){return e=String(e),Array(t-e.length+1).join(" ")+e}function s(e,t,n){return c["diff"+t](e.actual,e.expected).map(function(e){return n&&(e.value=e.value.replace(/\t/g,"<tab>").replace(/\r/g,"<CR>").replace(/\n/g,"<LF>\n")),e.added?a("diff added",e.value):e.removed?a("diff removed",e.value):e.value}).join("")}function a(e,t){return t.split("\n").map(function(t){return h(e,t)}).join("\n")}var u=r("browser/tty"),c=r("browser/diff"),l=r("../ms"),p=global.Date;global.setTimeout,global.setInterval,global.clearTimeout,global.clearInterval;var f=u.isatty(1)&&u.isatty(2);n=e.exports=o,n.useColors=f,n.colors={pass:90,fail:31,"bright pass":92,"bright fail":91,"bright yellow":93,pending:36,suite:0,"error title":0,"error message":31,"error stack":90,checkmark:32,fast:90,medium:33,slow:31,green:32,light:90,"diff gutter":90,"diff added":42,"diff removed":41},n.symbols={ok:"âœ“",err:"âœ–",dot:"â€¤"},"win32"==t.platform&&(n.symbols.ok="âˆš",n.symbols.err="Ã—",n.symbols.dot=".");var h=n.color=function(e,t){return n.useColors?"["+n.colors[e]+"m"+t+"[0m":t};n.window={width:f?t.stdout.getWindowSize?t.stdout.getWindowSize(1)[0]:u.getWindowSize()[1]:75},n.cursor={hide:function(){t.stdout.write("[?25l")},show:function(){t.stdout.write("[?25h")},deleteLine:function(){t.stdout.write("[2K")},beginningOfLine:function(){t.stdout.write("[0G")},CR:function(){n.cursor.deleteLine(),n.cursor.beginningOfLine()}},n.list=function(e){console.error(),e.forEach(function(e,t){var n=h("error title","  %s) %s:\n")+h("error message","     %s")+h("error stack","\n%s\n"),r=e.err,o=r.message||"",a=r.stack||o,u=a.indexOf(o)+o.length,c=a.slice(0,u),l=r.actual,p=r.expected,f=!0;if(r.showDiff&&(f=!1,r.actual=l=JSON.stringify(l,null,2),r.expected=p=JSON.stringify(p,null,2)),"string"==typeof l&&"string"==typeof p){var d=Math.max(l.length,p.length);c=20>d?s(r,"Chars",f):s(r,"Words",f);var g=c.split("\n");if(g.length>4){var m=String(g.length).length;c=g.map(function(e,t){return i(++t,m)+" |"+" "+e}).join("\n")}c="\n"+h("diff removed","actual")+" "+h("diff added","expected")+"\n\n"+c+"\n",c=c.replace(/^/gm,"      "),n=h("error title","  %s) %s:\n%s")+h("error stack","\n%s\n")}a=a.slice(u?u+1:u).replace(/^/gm,"  "),console.error(n,t+1,e.fullTitle(),c,a)})},o.prototype.epilogue=function(){function e(e){return 1==e?"test":"tests"}var t,r=this.stats;return console.log(),r.failures?(t=h("bright fail","  "+n.symbols.err)+h("fail"," %d of %d %s failed")+h("light",":"),console.error(t,r.failures,this.runner.total,e(this.runner.total)),o.list(this.failures),console.error(),void 0):(t=h("bright pass"," ")+h("green"," %d %s complete")+h("light"," (%s)"),console.log(t,r.tests||0,e(r.tests),l(r.duration)),r.pending&&(t=h("pending"," ")+h("pending"," %d %s pending"),console.log(t,r.pending,e(r.pending))),console.log(),void 0)}}),e.register("reporters/doc.js",function(e,t,n){function r(e){function t(){return Array(n).join("  ")}o.call(this,e);var n=(this.stats,e.total,2);e.on("suite",function(e){e.root||(++n,console.log('%s<section class="suite">',t()),++n,console.log("%s<h1>%s</h1>",t(),i.escape(e.title)),console.log("%s<dl>",t()))}),e.on("suite end",function(e){e.root||(console.log("%s</dl>",t()),--n,console.log("%s</section>",t()),--n)}),e.on("pass",function(e){console.log("%s  <dt>%s</dt>",t(),i.escape(e.title));var n=i.escape(i.clean(e.fn.toString()));console.log("%s  <dd><pre><code>%s</code></pre></dd>",t(),n)})}var o=n("./base"),i=n("../utils");t=e.exports=r}),e.register("reporters/dot.js",function(e,n,r){function o(e){s.call(this,e);var n=this,r=(this.stats,0|.75*s.window.width),o=0;e.on("start",function(){t.stdout.write("\n  ")}),e.on("pending",function(){t.stdout.write(a("pending",s.symbols.dot))}),e.on("pass",function(e){0==++o%r&&t.stdout.write("\n  "),"slow"==e.speed?t.stdout.write(a("bright yellow",s.symbols.dot)):t.stdout.write(a(e.speed,s.symbols.dot))}),e.on("fail",function(){0==++o%r&&t.stdout.write("\n  "),t.stdout.write(a("fail",s.symbols.dot))}),e.on("end",function(){console.log(),n.epilogue()})}function i(){}var s=r("./base"),a=s.color;n=e.exports=o,i.prototype=s.prototype,o.prototype=new i,o.prototype.constructor=o}),e.register("reporters/html-cov.js",function(e,n,r){function o(e){var n=r("jade"),o=__dirname+"/templates/coverage.jade",u=a.readFileSync(o,"utf8"),c=n.compile(u,{filename:o}),l=this;s.call(this,e,!1),e.on("end",function(){t.stdout.write(c({cov:l.cov,coverageClass:i}))})}function i(e){return e>=75?"high":e>=50?"medium":e>=25?"low":"terrible"}var s=r("./json-cov"),a=r("browser/fs");n=e.exports=o}),e.register("reporters/html.js",function(e,t,n){function r(e,t){l.call(this,e);var n,r,m=this.stats,v=(e.total,i(g)),y=v.getElementsByTagName("li"),b=y[1].getElementsByTagName("em")[0],w=y[1].getElementsByTagName("a")[0],x=y[2].getElementsByTagName("em")[0],k=y[2].getElementsByTagName("a")[0],T=y[3].getElementsByTagName("em")[0],A=v.getElementsByTagName("canvas")[0],E=i('<ul id="mocha-report"></ul>'),C=[E];if(t=t||document.getElementById("mocha"),A.getContext){var j=window.devicePixelRatio||1;A.style.width=A.width,A.style.height=A.height,A.width*=j,A.height*=j,r=A.getContext("2d"),r.scale(j,j),n=new f}return t?(c(w,"click",function(){a();var e=/pass/.test(E.className)?"":" pass";E.className=E.className.replace(/fail|pass/g,"")+e,E.className.trim()&&s("test pass")}),c(k,"click",function(){a();var e=/fail/.test(E.className)?"":" fail";E.className=E.className.replace(/fail|pass/g,"")+e,E.className.trim()&&s("test fail")}),t.appendChild(v),t.appendChild(E),n&&n.size(40),e.on("suite",function(e){if(!e.root){var t="?grep="+encodeURIComponent(e.fullTitle()),n=i('<li class="suite"><h1><a href="%s">%s</a></h1></li>',t,h(e.title));C[0].appendChild(n),C.unshift(document.createElement("ul")),n.appendChild(C[0])}}),e.on("suite end",function(e){e.root||C.shift()}),e.on("fail",function(t){"hook"==t.type&&e.emit("test end",t)}),e.on("test end",function(e){var t=0|100*(m.tests/this.total);n&&n.update(t).draw(r);var o=new d-m.start;if(u(b,m.passes),u(x,m.failures),u(T,(o/1e3).toFixed(2)),"passed"==e.state)var s=i('<li class="test pass %e"><h2>%e<span class="duration">%ems</span> <a href="?grep=%e" class="replay">â€£</a></h2></li>',e.speed,e.title,e.duration,encodeURIComponent(e.fullTitle()));else if(e.pending)var s=i('<li class="test pass pending"><h2>%e</h2></li>',e.title);else{var s=i('<li class="test fail"><h2>%e <a href="?grep=%e" class="replay">â€£</a></h2></li>',e.title,encodeURIComponent(e.fullTitle())),a=e.err.stack||e.err.toString();~a.indexOf(e.err.message)||(a=e.err.message+"\n"+a),"[object Error]"==a&&(a=e.err.message),!e.err.stack&&e.err.sourceURL&&void 0!==e.err.line&&(a+="\n("+e.err.sourceURL+":"+e.err.line+")"),s.appendChild(i('<pre class="error">%e</pre>',a))}if(!e.pending){var l=s.getElementsByTagName("h2")[0];c(l,"click",function(){f.style.display="none"==f.style.display?"block":"none"});var f=i("<pre><code>%e</code></pre>",p.clean(e.fn.toString()));s.appendChild(f),f.style.display="none"}C[0]&&C[0].appendChild(s)}),void 0):o("#mocha div missing, add it to your document")}function o(e){document.body.appendChild(i('<div id="mocha-error">%s</div>',e))}function i(e){var t=arguments,n=document.createElement("div"),r=1;return n.innerHTML=e.replace(/%([se])/g,function(e,n){switch(n){case"s":return String(t[r++]);case"e":return h(t[r++])}}),n.firstChild}function s(e){for(var t=document.getElementsByClassName("suite"),n=0;n<t.length;n++){var r=t[n].getElementsByClassName(e);0==r.length&&(t[n].className+=" hidden")}}function a(){for(var e=document.getElementsByClassName("suite hidden"),t=0;t<e.length;++t)e[t].className=e[t].className.replace("suite hidden","suite")}function u(e,t){e.textContent?e.textContent=t:e.innerText=t}function c(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}var l=n("./base"),p=n("../utils"),f=n("../browser/progress"),h=p.escape,d=global.Date;global.setTimeout,global.setInterval,global.clearTimeout,global.clearInterval,t=e.exports=r;var g='<ul id="mocha-stats"><li class="progress"><canvas width="40" height="40"></canvas></li><li class="passes"><a href="#">passes:</a> <em>0</em></li><li class="failures"><a href="#">failures:</a> <em>0</em></li><li class="duration">duration: <em>0</em>s</li></ul>'}),e.register("reporters/index.js",function(e,t,n){t.Base=n("./base"),t.Dot=n("./dot"),t.Doc=n("./doc"),t.TAP=n("./tap"),t.JSON=n("./json"),t.HTML=n("./html"),t.List=n("./list"),t.Min=n("./min"),t.Spec=n("./spec"),t.Nyan=n("./nyan"),t.XUnit=n("./xunit"),t.Markdown=n("./markdown"),t.Progress=n("./progress"),t.Landing=n("./landing"),t.JSONCov=n("./json-cov"),t.HTMLCov=n("./html-cov"),t.JSONStream=n("./json-stream"),t.Teamcity=n("./teamcity")}),e.register("reporters/json-cov.js",function(e,n,r){function o(e,n){var r=this,n=1==arguments.length?!0:n;u.call(this,e);var o=[],s=[],c=[];e.on("test end",function(e){o.push(e)}),e.on("pass",function(e){c.push(e)}),e.on("fail",function(e){s.push(e)}),e.on("end",function(){var e=global._$jscoverage||{},u=r.cov=i(e);u.stats=r.stats,u.tests=o.map(a),u.failures=s.map(a),u.passes=c.map(a),n&&t.stdout.write(JSON.stringify(u,null,2))})}function i(e){var t={instrumentation:"node-jscoverage",sloc:0,hits:0,misses:0,coverage:0,files:[]};for(var n in e){var r=s(n,e[n]);t.files.push(r),t.hits+=r.hits,t.misses+=r.misses,t.sloc+=r.sloc}return t.files.sort(function(e,t){return e.filename.localeCompare(t.filename)}),t.sloc>0&&(t.coverage=100*(t.hits/t.sloc)),t}function s(e,t){var n={filename:e,coverage:0,hits:0,misses:0,sloc:0,source:{}};return t.source.forEach(function(e,r){r++,0===t[r]?(n.misses++,n.sloc++):void 0!==t[r]&&(n.hits++,n.sloc++),n.source[r]={source:e,coverage:void 0===t[r]?"":t[r]}}),n.coverage=100*(n.hits/n.sloc),n}function a(e){return{title:e.title,fullTitle:e.fullTitle(),duration:e.duration}}var u=r("./base");n=e.exports=o}),e.register("reporters/json-stream.js",function(e,n,r){function o(e){s.call(this,e);var n=this,r=(this.stats,e.total);e.on("start",function(){console.log(JSON.stringify(["start",{total:r}]))}),e.on("pass",function(e){console.log(JSON.stringify(["pass",i(e)]))}),e.on("fail",function(e){console.log(JSON.stringify(["fail",i(e)]))}),e.on("end",function(){t.stdout.write(JSON.stringify(["end",n.stats]))})}function i(e){return{title:e.title,fullTitle:e.fullTitle(),duration:e.duration}}var s=r("./base");s.color,n=e.exports=o}),e.register("reporters/json.js",function(e,n,r){function o(e){var n=this;s.call(this,e);var r=[],o=[],a=[];e.on("test end",function(e){r.push(e)}),e.on("pass",function(e){a.push(e)}),e.on("fail",function(e){o.push(e)}),e.on("end",function(){var e={stats:n.stats,tests:r.map(i),failures:o.map(i),passes:a.map(i)};t.stdout.write(JSON.stringify(e,null,2))})}function i(e){return{title:e.title,fullTitle:e.fullTitle(),duration:e.duration}}var s=r("./base");s.cursor,s.color,n=e.exports=o}),e.register("reporters/landing.js",function(e,n,r){function o(e){function n(){var e=Array(o).join("-");return"  "+u("runway",e)}s.call(this,e);var r=this,o=(this.stats,0|.75*s.window.width),i=e.total,c=t.stdout,l=u("plane","âœˆ"),p=-1,f=0;e.on("start",function(){c.write("\n  "),a.hide()}),e.on("test end",function(e){var t=-1==p?0|o*++f/i:p;"failed"==e.state&&(l=u("plane crash","âœˆ"),p=t),c.write("[4F\n\n"),c.write(n()),c.write("\n  "),c.write(u("runway",Array(t).join("â‹…"))),c.write(l),c.write(u("runway",Array(o-t).join("â‹…")+"\n")),c.write(n()),c.write("[0m")}),e.on("end",function(){a.show(),console.log(),r.epilogue()})}function i(){}var s=r("./base"),a=s.cursor,u=s.color;n=e.exports=o,s.colors.plane=0,s.colors["plane crash"]=31,s.colors.runway=90,i.prototype=s.prototype,o.prototype=new i,o.prototype.constructor=o}),e.register("reporters/list.js",function(e,n,r){function o(e){s.call(this,e);var n=this,r=(this.stats,0);e.on("start",function(){console.log()}),e.on("test",function(e){t.stdout.write(u("pass","    "+e.fullTitle()+": "))}),e.on("pending",function(e){var t=u("checkmark","  -")+u("pending"," %s");console.log(t,e.fullTitle())}),e.on("pass",function(e){var t=u("checkmark","  "+s.symbols.dot)+u("pass"," %s: ")+u(e.speed,"%dms");a.CR(),console.log(t,e.fullTitle(),e.duration)}),e.on("fail",function(e){a.CR(),console.log(u("fail","  %d) %s"),++r,e.fullTitle())}),e.on("end",n.epilogue.bind(n))}function i(){}var s=r("./base"),a=s.cursor,u=s.color;n=e.exports=o,i.prototype=s.prototype,o.prototype=new i,o.prototype.constructor=o}),e.register("reporters/markdown.js",function(e,n,r){function o(e){function n(e){return Array(u).join("#")+" "+e}function r(e,t){var n=t;return t=t[e.title]=t[e.title]||{suite:e},e.suites.forEach(function(e){r(e,t)}),n}function o(e,t){++t;var n,r="";for(var i in e)"suite"!=i&&(i&&(n=" - ["+i+"](#"+s.slug(e[i].suite.fullTitle())+")\n"),i&&(r+=Array(t).join("  ")+n),r+=o(e[i],t));return--t,r}function a(e){var t=r(e,{});return o(t,0)}i.call(this,e);var u=(this.stats,0),c="";a(e.suite),e.on("suite",function(e){++u;var t=s.slug(e.fullTitle());c+='<a name="'+t+'"></a>'+"\n",c+=n(e.title)+"\n"}),e.on("suite end",function(){--u}),e.on("pass",function(e){var t=s.clean(e.fn.toString());c+=e.title+".\n",c+="\n```js\n",c+=t+"\n",c+="```\n\n"}),e.on("end",function(){t.stdout.write("# TOC\n"),t.stdout.write(a(e.suite)),t.stdout.write(c)})}var i=r("./base"),s=r("../utils");n=e.exports=o}),e.register("reporters/min.js",function(e,n,r){function o(e){s.call(this,e),e.on("start",function(){t.stdout.write("[2J"),t.stdout.write("[1;3H")}),e.on("end",this.epilogue.bind(this))}function i(){}var s=r("./base");n=e.exports=o,i.prototype=s.prototype,o.prototype=new i,o.prototype.constructor=o}),e.register("reporters/nyan.js",function(e,n,r){function o(e){a.call(this,e);var t=this,n=(this.stats,0|.75*a.window.width),r=(this.rainbowColors=t.generateColors(),this.colorIndex=0,this.numberOfLines=4,this.trajectories=[[],[],[],[]],this.nyanCatWidth=11);this.trajectoryWidthMax=n-r,this.scoreboardWidth=5,this.tick=0,e.on("start",function(){a.cursor.hide(),t.draw("start")}),e.on("pending",function(){t.draw("pending")}),e.on("pass",function(){t.draw("pass")}),e.on("fail",function(){t.draw("fail")}),e.on("end",function(){a.cursor.show();for(var e=0;e<t.numberOfLines;e++)i("\n");t.epilogue()})}function i(e){t.stdout.write(e)}function s(){}var a=r("./base");a.color,n=e.exports=o,o.prototype.draw=function(e){this.appendRainbow(),this.drawScoreboard(),this.drawRainbow(),this.drawNyanCat(e),this.tick=!this.tick},o.prototype.drawScoreboard=function(){function e(e,t){i(" "),i("["+e+"m"+t+"[0m"),i("\n")}var t=this.stats,n=a.colors;e(n.green,t.passes),e(n.fail,t.failures),e(n.pending,t.pending),i("\n"),this.cursorUp(this.numberOfLines)},o.prototype.appendRainbow=function(){for(var e=this.tick?"_":"-",t=this.rainbowify(e),n=0;n<this.numberOfLines;n++){var r=this.trajectories[n];r.length>=this.trajectoryWidthMax&&r.shift(),r.push(t)}},o.prototype.drawRainbow=function(){var e=this;this.trajectories.forEach(function(t){i("["+e.scoreboardWidth+"C"),i(t.join("")),i("\n")}),this.cursorUp(this.numberOfLines)},o.prototype.drawNyanCat=function(e){var t=this,n=this.scoreboardWidth+this.trajectories[0].length,r="["+n+"C",o="";i(r),i("_,------,"),i("\n"),i(r),o=t.tick?"  ":"   ",i("_|"+o+"/\\_/\\ "),i("\n"),i(r),o=t.tick?"_":"__";var s,a=t.tick?"~":"^";switch(e){case"pass":s="( ^ .^)";break;case"fail":s="( o .o)";break;default:s="( - .-)"}i(a+"|"+o+s+" "),i("\n"),i(r),o=t.tick?" ":"  ",i(o+'""  "" '),i("\n"),this.cursorUp(this.numberOfLines)},o.prototype.cursorUp=function(e){i("["+e+"A")},o.prototype.cursorDown=function(e){i("["+e+"B")},o.prototype.generateColors=function(){for(var e=[],t=0;42>t;t++){var n=Math.floor(Math.PI/3),r=t*(1/6),o=Math.floor(3*Math.sin(r)+3),i=Math.floor(3*Math.sin(r+2*n)+3),s=Math.floor(3*Math.sin(r+4*n)+3);e.push(36*o+6*i+s+16)}return e},o.prototype.rainbowify=function(e){var t=this.rainbowColors[this.colorIndex%this.rainbowColors.length];return this.colorIndex+=1,"[38;5;"+t+"m"+e+"[0m"},s.prototype=a.prototype,o.prototype=new s,o.prototype.constructor=o}),e.register("reporters/progress.js",function(e,n,r){function o(e,n){s.call(this,e);var r=this,n=n||{},o=(this.stats,0|.5*s.window.width),i=e.total,c=0;Math.max,n.open=n.open||"[",n.complete=n.complete||"â–¬",n.incomplete=n.incomplete||s.symbols.dot,n.close=n.close||"]",n.verbose=!1,e.on("start",function(){console.log(),a.hide()}),e.on("test end",function(){c++;var e=c/i,r=0|o*e,s=o-r;a.CR(),t.stdout.write("[J"),t.stdout.write(u("progress","  "+n.open)),t.stdout.write(Array(r).join(n.complete)),t.stdout.write(Array(s).join(n.incomplete)),t.stdout.write(u("progress",n.close)),n.verbose&&t.stdout.write(u("progress"," "+c+" of "+i))}),e.on("end",function(){a.show(),console.log(),r.epilogue()})}function i(){}var s=r("./base"),a=s.cursor,u=s.color;n=e.exports=o,s.colors.progress=90,i.prototype=s.prototype,o.prototype=new i,o.prototype.constructor=o}),e.register("reporters/spec.js",function(e,n,r){function o(e){function n(){return Array(o).join("  ")}s.call(this,e);var r=this,o=(this.stats,0),i=0;e.on("start",function(){console.log()}),e.on("suite",function(e){++o,console.log(u("suite","%s%s"),n(),e.title)}),e.on("suite end",function(){--o,1==o&&console.log()}),e.on("test",function(e){t.stdout.write(n()+u("pass","  â—¦ "+e.title+": "))}),e.on("pending",function(e){var t=n()+u("pending","  - %s");console.log(t,e.title)}),e.on("pass",function(e){if("fast"==e.speed){var t=n()+u("checkmark","  "+s.symbols.ok)+u("pass"," %s ");a.CR(),console.log(t,e.title)}else{var t=n()+u("checkmark","  "+s.symbols.ok)+u("pass"," %s ")+u(e.speed,"(%dms)");a.CR(),console.log(t,e.title,e.duration)}}),e.on("fail",function(e){a.CR(),console.log(n()+u("fail","  %d) %s"),++i,e.title)}),e.on("end",r.epilogue.bind(r))}function i(){}var s=r("./base"),a=s.cursor,u=s.color;n=e.exports=o,i.prototype=s.prototype,o.prototype=new i,o.prototype.constructor=o}),e.register("reporters/tap.js",function(e,t,n){function r(e){i.call(this,e);var t=(this.stats,1),n=0,r=0;
e.on("start",function(){var t=e.grepTotal(e.suite);console.log("%d..%d",1,t)}),e.on("test end",function(){++t}),e.on("pending",function(e){console.log("ok %d %s # SKIP -",t,o(e))}),e.on("pass",function(e){n++,console.log("ok %d %s",t,o(e))}),e.on("fail",function(e,n){r++,console.log("not ok %d %s",t,o(e)),n.stack&&console.log(n.stack.replace(/^/gm,"  "))}),e.on("end",function(){console.log("# tests "+(n+r)),console.log("# pass "+n),console.log("# fail "+r)})}function o(e){return e.fullTitle().replace(/#/g,"")}var i=n("./base");i.cursor,i.color,t=e.exports=r}),e.register("reporters/teamcity.js",function(e,t,n){function r(e){i.call(this,e);var t=this.stats;e.on("start",function(){console.log("##teamcity[testSuiteStarted name='mocha.suite']")}),e.on("test",function(e){console.log("##teamcity[testStarted name='"+o(e.fullTitle())+"']")}),e.on("fail",function(e,t){console.log("##teamcity[testFailed name='"+o(e.fullTitle())+"' message='"+o(t.message)+"']")}),e.on("pending",function(e){console.log("##teamcity[testIgnored name='"+o(e.fullTitle())+"' message='pending']")}),e.on("test end",function(e){console.log("##teamcity[testFinished name='"+o(e.fullTitle())+"' duration='"+e.duration+"']")}),e.on("end",function(){console.log("##teamcity[testSuiteFinished name='mocha.suite' duration='"+t.duration+"']")})}function o(e){return e.replace(/\|/g,"||").replace(/\n/g,"|n").replace(/\r/g,"|r").replace(/\[/g,"|[").replace(/\]/g,"|]").replace(/\u0085/g,"|x").replace(/\u2028/g,"|l").replace(/\u2029/g,"|p").replace(/'/g,"|'")}var i=n("./base");t=e.exports=r}),e.register("reporters/xunit.js",function(e,t,n){function r(e){u.call(this,e);var t=this.stats,n=[];e.on("pass",function(e){n.push(e)}),e.on("fail",function(e){n.push(e)}),e.on("end",function(){console.log(s("testsuite",{name:"Mocha Tests",tests:t.tests,failures:t.failures,errors:t.failures,skip:t.tests-t.failures-t.passes,timestamp:(new p).toUTCString(),time:t.duration/1e3},!1)),n.forEach(i),console.log("</testsuite>")})}function o(){}function i(e){var t={classname:e.parent.fullTitle(),name:e.title,time:e.duration/1e3};if("failed"==e.state){var n=e.err;t.message=l(n.message),console.log(s("testcase",t,!1,s("failure",t,!1,a(n.stack))))}else e.pending?console.log(s("testcase",t,!1,s("skipped",{},!0))):console.log(s("testcase",t,!0))}function s(e,t,n,r){var o,i=n?"/>":">",s=[];for(var a in t)s.push(a+'="'+l(t[a])+'"');return o="<"+e+(s.length?" "+s.join(" "):"")+i,r&&(o+=r+"</"+e+i),o}function a(e){return"<![CDATA["+l(e)+"]]>"}var u=n("./base"),c=n("../utils"),l=c.escape,p=global.Date;global.setTimeout,global.setInterval,global.clearTimeout,global.clearInterval,t=e.exports=r,o.prototype=u.prototype,r.prototype=new o,r.prototype.constructor=r}),e.register("runnable.js",function(e,t,n){function r(e,t){this.title=e,this.fn=t,this.async=t&&t.length,this.sync=!this.async,this._timeout=2e3,this._slow=75,this.timedOut=!1}function o(){}var i=n("browser/events").EventEmitter,s=n("browser/debug")("mocha:runnable"),a=n("./ms"),u=global.Date,c=global.setTimeout,l=(global.setInterval,global.clearTimeout);global.clearInterval;var p=Object.prototype.toString;e.exports=r,o.prototype=i.prototype,r.prototype=new o,r.prototype.constructor=r,r.prototype.timeout=function(e){return 0==arguments.length?this._timeout:("string"==typeof e&&(e=a(e)),s("timeout %d",e),this._timeout=e,this.timer&&this.resetTimeout(),this)},r.prototype.slow=function(e){return 0===arguments.length?this._slow:("string"==typeof e&&(e=a(e)),s("timeout %d",e),this._slow=e,this)},r.prototype.fullTitle=function(){return this.parent.fullTitle()+" "+this.title},r.prototype.clearTimeout=function(){l(this.timer)},r.prototype.inspect=function(){return JSON.stringify(this,function(e,t){return"_"!=e[0]?"parent"==e?"#<Suite>":"ctx"==e?"#<Context>":t:void 0},2)},r.prototype.resetTimeout=function(){var e=this,t=this.timeout();this.clearTimeout(),t&&(this.timer=c(function(){e.callback(new Error("timeout of "+t+"ms exceeded")),e.timedOut=!0},t))},r.prototype.run=function(e){function t(e){o||(o=!0,i.emit("error",e||new Error("done() called multiple times")))}function n(n){if(!i.timedOut){if(r)return t(n);i.clearTimeout(),i.duration=new u-a,r=!0,e(n)}}var r,o,i=this,s=this.timeout(),a=new u,l=this.ctx;if(l&&l.runnable(this),this.async&&s&&(this.timer=c(function(){n(new Error("timeout of "+s+"ms exceeded")),i.timedOut=!0},s)),this.callback=n,this.async)try{this.fn.call(l,function(e){return e instanceof Error||"[object Error]"===p.call(e)?n(e):null!=e?n(new Error("done() invoked with non-Error: "+e)):(n(),void 0)})}catch(f){n(f)}else{if(this.asyncOnly)return n(new Error("--async-only option in use without declaring `done()`"));try{this.pending||this.fn.call(l),this.duration=new u-a,e()}catch(f){e(f)}}}}),e.register("runner.js",function(e,n,r){function o(e){var t=this;this._globals=[],this.suite=e,this.total=e.total(),this.failures=0,this.on("test end",function(e){t.checkGlobals(e)}),this.on("hook end",function(e){t.checkGlobals(e)}),this.grep(/.*/),this.globals(this.globalProps().concat(["errno"]))}function i(){}function s(e,t){return l(t,function(t){var n=l(e,function(e){return~e.indexOf("*")?0==t.indexOf(e.split("*")[0]):/^mocha-/.test(t)?!0:t==e});return 0==n.length&&(!global.navigator||"onerror"!==t)})}var a=r("browser/events").EventEmitter,u=r("browser/debug")("mocha:runner"),c=(r("./test"),r("./utils")),l=c.filter;c.keys;var p=["setTimeout","clearTimeout","setInterval","clearInterval","XMLHttpRequest","Date"];e.exports=o,o.immediately=global.setImmediate||t.nextTick,i.prototype=a.prototype,o.prototype=new i,o.prototype.constructor=o,o.prototype.grep=function(e,t){return u("grep %s",e),this._grep=e,this._invert=t,this.total=this.grepTotal(this.suite),this},o.prototype.grepTotal=function(e){var t=this,n=0;return e.eachTest(function(e){var r=t._grep.test(e.fullTitle());t._invert&&(r=!r),r&&n++}),n},o.prototype.globalProps=function(){for(var e=c.keys(global),t=0;t<p.length;++t)~c.indexOf(e,p[t])||e.push(p[t]);return e},o.prototype.globals=function(e){return 0==arguments.length?this._globals:(u("globals %j",e),c.forEach(e,function(e){this._globals.push(e)},this),this)},o.prototype.checkGlobals=function(e){if(!this.ignoreLeaks){var n,r=this._globals,o=this.globalProps(),i=t.kill;i&&1==r.length-o.length||2!=r.length-o.length&&(n=s(r,o),this._globals=this._globals.concat(n),n.length>1?this.fail(e,new Error("global leaks detected: "+n.join(", "))):n.length&&this.fail(e,new Error("global leak detected: "+n[0])))}},o.prototype.fail=function(e,t){++this.failures,e.state="failed","string"==typeof t&&(t=new Error('the string "'+t+'" was thrown, throw an Error :)')),this.emit("fail",e,t)},o.prototype.failHook=function(e,t){this.fail(e,t),this.emit("end")},o.prototype.hook=function(e,t){function n(e){var r=i[e];return r?(s.currentRunnable=r,s.emit("hook",r),r.on("error",function(e){s.failHook(r,e)}),r.run(function(t){r.removeAllListeners("error");var o=r.error();return o&&s.fail(s.test,o),t?s.failHook(r,t):(s.emit("hook end",r),n(++e),void 0)}),void 0):t()}var r=this.suite,i=r["_"+e],s=this;o.immediately(function(){n(0)})},o.prototype.hooks=function(e,t,n){function r(s){return o.suite=s,s?(o.hook(e,function(e){return e?(o.suite=i,n(e)):(r(t.pop()),void 0)}),void 0):(o.suite=i,n())}var o=this,i=this.suite;r(t.pop())},o.prototype.hookUp=function(e,t){var n=[this.suite].concat(this.parents()).reverse();this.hooks(e,n,t)},o.prototype.hookDown=function(e,t){var n=[this.suite].concat(this.parents());this.hooks(e,n,t)},o.prototype.parents=function(){for(var e=this.suite,t=[];e=e.parent;)t.push(e);return t},o.prototype.runTest=function(e){var t=this.test,n=this;this.asyncOnly&&(t.asyncOnly=!0);try{t.on("error",function(e){n.fail(t,e)}),t.run(e)}catch(r){e(r)}},o.prototype.runTests=function(e,t){function n(){if(o.failures&&e._bail)return t();if(r=i.shift(),!r)return t();var s=o._grep.test(r.fullTitle());return o._invert&&(s=!s),s?r.pending?(o.emit("pending",r),o.emit("test end",r),n()):(o.emit("test",o.test=r),o.hookDown("beforeEach",function(){o.currentRunnable=o.test,o.runTest(function(e){return r=o.test,e?(o.fail(r,e),o.emit("test end",r),o.hookUp("afterEach",n)):(r.state="passed",o.emit("pass",r),o.emit("test end",r),o.hookUp("afterEach",n),void 0)})}),void 0):n()}var r,o=this,i=e.tests.slice();this.next=n,n()},o.prototype.runSuite=function(e,t){function n(){var t=e.suites[s++];return t?(i.runSuite(t,n),void 0):r()}function r(){i.suite=e,i.hook("afterAll",function(){i.emit("suite end",e),t()})}var o=this.grepTotal(e),i=this,s=0;return u("run suite %s",e.fullTitle()),o?(this.emit("suite",this.suite=e),this.hook("beforeAll",function(){i.runTests(e,n)}),void 0):t()},o.prototype.uncaught=function(e){u("uncaught exception %s",e.message);var t=this.currentRunnable;if(t&&"failed"!=t.state)return t.clearTimeout(),e.uncaught=!0,this.fail(t,e),"test"==t.type?(this.emit("test end",t),this.hookUp("afterEach",this.next),void 0):(this.emit("end"),void 0)},o.prototype.run=function(e){function n(e){r.uncaught(e)}var r=this,e=e||function(){};return u("start"),this.on("end",function(){u("end"),t.removeListener("uncaughtException",n),e(r.failures)}),this.emit("start"),this.runSuite(this.suite,function(){u("finished running"),r.emit("end")}),t.on("uncaughtException",n),this}}),e.register("suite.js",function(e,t,n){function r(e,t){this.title=e,this.ctx=t,this.suites=[],this.tests=[],this.pending=!1,this._beforeEach=[],this._beforeAll=[],this._afterEach=[],this._afterAll=[],this.root=!e,this._timeout=2e3,this._slow=75,this._bail=!1}function o(){}var i=n("browser/events").EventEmitter,s=n("browser/debug")("mocha:suite"),a=n("./ms"),u=n("./utils"),c=n("./hook");t=e.exports=r,t.create=function(e,t){var n=new r(t,e.ctx);return n.parent=e,e.pending&&(n.pending=!0),t=n.fullTitle(),e.addSuite(n),n},o.prototype=i.prototype,r.prototype=new o,r.prototype.constructor=r,r.prototype.clone=function(){var e=new r(this.title);return s("clone"),e.ctx=this.ctx,e.timeout(this.timeout()),e.slow(this.slow()),e.bail(this.bail()),e},r.prototype.timeout=function(e){return 0==arguments.length?this._timeout:("string"==typeof e&&(e=a(e)),s("timeout %d",e),this._timeout=parseInt(e,10),this)},r.prototype.slow=function(e){return 0===arguments.length?this._slow:("string"==typeof e&&(e=a(e)),s("slow %d",e),this._slow=e,this)},r.prototype.bail=function(e){return 0==arguments.length?this._bail:(s("bail %s",e),this._bail=e,this)},r.prototype.beforeAll=function(e){if(this.pending)return this;var t=new c('"before all" hook',e);return t.parent=this,t.timeout(this.timeout()),t.slow(this.slow()),t.ctx=this.ctx,this._beforeAll.push(t),this.emit("beforeAll",t),this},r.prototype.afterAll=function(e){if(this.pending)return this;var t=new c('"after all" hook',e);return t.parent=this,t.timeout(this.timeout()),t.slow(this.slow()),t.ctx=this.ctx,this._afterAll.push(t),this.emit("afterAll",t),this},r.prototype.beforeEach=function(e){if(this.pending)return this;var t=new c('"before each" hook',e);return t.parent=this,t.timeout(this.timeout()),t.slow(this.slow()),t.ctx=this.ctx,this._beforeEach.push(t),this.emit("beforeEach",t),this},r.prototype.afterEach=function(e){if(this.pending)return this;var t=new c('"after each" hook',e);return t.parent=this,t.timeout(this.timeout()),t.slow(this.slow()),t.ctx=this.ctx,this._afterEach.push(t),this.emit("afterEach",t),this},r.prototype.addSuite=function(e){return e.parent=this,e.timeout(this.timeout()),e.slow(this.slow()),e.bail(this.bail()),this.suites.push(e),this.emit("suite",e),this},r.prototype.addTest=function(e){return e.parent=this,e.timeout(this.timeout()),e.slow(this.slow()),e.ctx=this.ctx,this.tests.push(e),this.emit("test",e),this},r.prototype.fullTitle=function(){if(this.parent){var e=this.parent.fullTitle();if(e)return e+" "+this.title}return this.title},r.prototype.total=function(){return u.reduce(this.suites,function(e,t){return e+t.total()},0)+this.tests.length},r.prototype.eachTest=function(e){return u.forEach(this.tests,e),u.forEach(this.suites,function(t){t.eachTest(e)}),this}}),e.register("test.js",function(e,t,n){function r(e,t){i.call(this,e,t),this.pending=!t,this.type="test"}function o(){}var i=n("./runnable");e.exports=r,o.prototype=i.prototype,r.prototype=new o,r.prototype.constructor=r}),e.register("utils.js",function(e,t,n){function r(e){return!~c.indexOf(e)}function o(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\/\/(.*)/gm,'<span class="comment">//$1</span>').replace(/('.*?')/gm,'<span class="string">$1</span>').replace(/(\d+\.\d+)/gm,'<span class="number">$1</span>').replace(/(\d+)/gm,'<span class="number">$1</span>').replace(/\bnew *(\w+)/gm,'<span class="keyword">new</span> <span class="init">$1</span>').replace(/\b(function|new|throw|return|var|if|else)\b/gm,'<span class="keyword">$1</span>')}var i=n("browser/fs"),s=n("browser/path"),a=s.join,u=n("browser/debug")("mocha:watch"),c=["node_modules",".git"];t.escape=function(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},t.forEach=function(e,t,n){for(var r=0,o=e.length;o>r;r++)t.call(n,e[r],r)},t.indexOf=function(e,t,n){for(var r=n||0,o=e.length;o>r;r++)if(e[r]===t)return r;return-1},t.reduce=function(e,t,n){for(var r=n,o=0,i=e.length;i>o;o++)r=t(r,e[o],o,e);return r},t.filter=function(e,t){for(var n=[],r=0,o=e.length;o>r;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n},t.keys=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t},t.watch=function(e,t){var n={interval:100};e.forEach(function(e){u("file %s",e),i.watchFile(e,n,function(n,r){r.mtime<n.mtime&&t(e)})})},t.files=function(e,n){return n=n||[],i.readdirSync(e).filter(r).forEach(function(r){r=a(e,r),i.statSync(r).isDirectory()?t.files(r,n):r.match(/\.(js|coffee)$/)&&n.push(r)}),n},t.slug=function(e){return e.toLowerCase().replace(/ +/g,"-").replace(/[^-\w]/g,"")},t.clean=function(e){e=e.replace(/^function *\(.*\) *{/,"").replace(/\s+\}$/,"");var n=e.match(/^\n?( *)/)[1].length,r=new RegExp("^ {"+n+"}","gm");return e=e.replace(r,""),t.trim(e)},t.escapeRegexp=function(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},t.trim=function(e){return e.replace(/^\s+|\s+$/g,"")},t.parseQuery=function(e){return t.reduce(e.replace("?","").split("&"),function(e,t){var n=t.indexOf("="),r=t.slice(0,n),o=t.slice(++n);return e[r]=decodeURIComponent(o),e},{})},t.highlightTags=function(e){for(var t=document.getElementsByTagName(e),n=0,r=t.length;r>n;++n)t[n].innerHTML=o(t[n].innerHTML)}});var t={};t.exit=function(){},t.stdout={},global=window,t.removeListener=function(e){"uncaughtException"==e&&(window.onerror=null)},t.on=function(e,t){"uncaughtException"==e&&(window.onerror=function(e,n,r){t(new Error(e+" ("+n+":"+r+")"))})},function(){function t(){for(var e=(new Date).getTime();i.length&&(new Date).getTime()-e<100;)i.shift()();n=i.length?setTimeout(t,0):null}var n,r=window.Mocha=e("mocha"),o=window.mocha=new r({reporter:"html"}),i=[];r.Runner.immediately=function(e){i.push(e),n||(n=setTimeout(t,0))},o.ui=function(e){return r.prototype.ui.call(this,e),this.suite.emit("pre-require",window,null,this),this},o.setup=function(e){"string"==typeof e&&(e={ui:e});for(var t in e)this[t](e[t]);return this},o.run=function(e){o.options,o.globals("location");var t=r.utils.parseQuery(window.location.search||"");return t.grep&&o.grep(t.grep),t.invert&&o.invert(),r.prototype.run.call(o,function(){r.utils.highlightTags("code"),e&&e()})}}()}();